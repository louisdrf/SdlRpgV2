#include <SDL.h>
#include "../headers/structs.h"
#include "../headers/defines.h"


void init_map(Map *map, Game *g) {


    int partWidth = SCREEN_W / NBTILES;
    int partHeight = SCREEN_H / NBTILES;

    for (int i = 0; i < NBTILES; i++) {
        for (int j = 0; j < NBTILES; j++) {
            int partX = i * partWidth;
            int partY = j * partHeight;

            map->parts[i][j].x = partX;
            map->parts[i][j].y = partY;
            map->parts[i][j].w = partWidth;
            map->parts[i][j].h = partHeight;

            SDL_SetRenderDrawColor(g->renderer, 255, 0, 0, 255); // Couleur rouge
            SDL_RenderDrawRect(g->renderer, &(map->parts[i][j]));
        }
    }
    
}

void init_collisions(Map *map, Game *g) {

    int quadmapValues[20][20] = {
            {126, 127, 200, 201, 126, 127, 200, 201, 120, 18, 19, 20, 21, 22, 120, 268, 200, 201, 126, 127},
            {164, 165, 238, 239, 164, 165, 238, 239, 120, 60, 57, 58, 59, 60, 120, 268, 238, 239, 164, 165},
            {200, 201, 126, 127, 200, 201, 121, 121, 120, 98, 95, 96, 97, 98, 120, 121, 121, 351, 200, 201},
            {238, 239, 164, 165, 238, 239, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 351, 238, 239},
            {126, 127, 200, 201, 351, 351, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 351, 126, 127},
            {164, 165, 238, 239, 351, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 164, 165},
            {126, 127, 351, 351, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 126, 127},
            {164, 165, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 164, 165},
            {200, 201, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 268, 268},
            {238, 239, 0, 0, 0, 0, 0, 0, 0, 236, 237, 0, 0, 0, 0, 0, 0, 0, 268, 268},
            {200, 201, 0, 0, 0, 0, 0, 0, 0, 274, 275, 0, 0, 0, 0, 0, 0, 0, 268, 268},
            {238, 239, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 268, 268},
            {126, 127, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 309},
            {164, 165, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 154, 155},
            {0, 230, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 154, 155},
            {0, 230, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 154, 155},
            {0, 230, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 348},
            {0, 230, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 126, 127, 126, 127, 200, 201},
            {126, 127, 200, 201, 126, 127, 200, 201, 126, 127, 126, 127, 268, 268, 164, 165, 164, 165, 238, 239},
            {164, 165, 238, 239, 164, 165, 238, 239, 164, 165, 164, 165, 268, 268, 230, 230, 230, 230, 230, 230}
            };
        memcpy(map->quadmap, quadmapValues, sizeof(quadmapValues));

}